Run Fortify-Scan:
[NOT work] logon to $<fortify_server> by Administrator/

Resolved:
<= create a FortifyVersion “$<project1_name>” on the fortify 360 server and retry the job on Jenkins.

"C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.30\jre\bin\keytool.exe" -delete -trustcacerts -alias rootCA -file C:\fortify\$<Certificate>.der -keystore "C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.10\jre\lib\security\cacerts" -storepass $<certificate_password_to_set>
"C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.10\jre64\bin\keytool" -delete -trustcacerts -alias rootCA -file C:\fortify\$<Certificate>.der -keystore "C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.10\jre64\lib\security\cacerts" -storepass $<certificate_password_to_set>


"C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.30\jre\bin\keytool.exe" -import -trustcacerts -alias rootCA -file C:\fortify\$<Certificate>.der -keystore "C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.30\jre\lib\security\cacerts" -storepass $<certificate_password_to_set>
#no jre64 for 4.30:  "C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.30\jre64\bin\keytool" -import -trustcacerts -alias rootCA -file C:\fortify\$<Certificate>.der -keystore "C:\HP_Fortify\HP_Fortify_SCA_and_Apps_4.30\jre64\lib\security\cacerts" -storepass $<certificate_password_to_set>

## 
## run following cmd to check if fortify SSC server works
##
# cmd
fortifyclient token -gettoken AnalysisUploadToken -url https://$<fortify_server_weburl>/ssc -user $<user_name>
## correct output:
Enter Password:
Authorization Token: $<authorization_token>

# cmd
fortifyclient listprojects -url https://$<fortify_server_weburl>/ssc -authtoken $<authorization_token>
## correct output:
projects ...


fortify scan 扫描 $<project> 的job。 
1. 下载指定tag的代码 
2. fortify 扫描 
3. 上传扫描结果到fortify server https://$<fortify_server_weburl>/ssc

Please double check authToken has the permission to upload to fortify server. 

It is hard-coded in this job by ldi.fortify.f360.authToken=$<authorization_token> 
This authToken is for account $<user_name>. It can be generated by command "fortifyclient token -gettoken AnalysisUploadToken -url https://$<fortify_server_weburl>/ssc -user $<user_name>" 

# authtoken already updated end


1. Goto job http://$<jenkins_server>:8080/view/tools/job/scm_fortify_scan/
		Click  Build with Parameters
	Select target project  and the Version on  fortify 360 server and the tag to scan.
		FortifyVersion : can't have blanks in it.  "$<project1> $<name>" didn't work.
	Tag: 
		Created after one version released . 
		Must can be find in git before scan .

##
## FAQ for fortify scan
##
#
#  fix Access Denied issue in fortify scan
#
# error
[INFO] Executing system command: cmd.exe /X /C "fortifyclient uploadFPR -f c:\jenkins\workspace\$<jenkins_job1>\fortify\target\result.fpr -project "$<project_name>" -version $<project_version> -authtoken $<authorization_token_invalid> -url https://$<fortify_server_weburl>/ssc"
[INFO] 
[INFO] Access Denied.  Please ensure the requested project exists and the supplied user has appropriate permissions.
[INFO] 
[INFO] ------------------------------------------------------------------------

=> 
## fix :
#    replaced $<authorization_token_invalid> (for $<user_name_invalid>) by $<authorization_token> ( for $<user_name> ).
for 2 Jenkins jobs under http://$<jenkins_server>:8080/job/scm_fortify_scan/
    http://$<jenkins_server>:8080/job/$<jenkins_job1>/
    http://$<jenkins_server>:8080/job/$<jenkins_job2>/

## double check :    
#   manual command on $<fortify_server>
cmd.exe /X /C "fortifyclient uploadFPR -f c:\jenkins\workspace\$<jenkins_job1>\fortify\target\result.fpr -project "$<project_name>" -version $<project_version> -authtoken $<authorization_token> -url https://$<fortify_server_weburl>/ssc"

## get fortify auth-token
fortifyclient token -gettoken AnalysisUploadToken -url https://$<fortify_server_weburl>/ssc -user $<user_name>
#    output:
Enter Password:
Authorization Token: $<authorization_token>

